# Text2Cmdæ¨¡å— - å®Œå–„æ€»ç»“

## ğŸ‰ æ¨¡å—å®Œå–„å®Œæˆ

Text2Cmdï¼ˆå¤§æ¨¡å‹æŒ‡ä»¤è§£ææ¨¡å—ï¼‰å·²ç»æˆåŠŸå®Œå–„ï¼Œç°åœ¨å…·å¤‡äº†ä¸“ä¸šçº§çš„AIæŒ‡ä»¤è§£æèƒ½åŠ›ã€‚

## âœ… å·²å®ç°åŠŸèƒ½

### 1. æ ¸å¿ƒè§£æå¼•æ“
- **é«˜çº§è§£æå™¨** (`text2cmd_parser.py`) - å®Œæ•´çš„AIé©±åŠ¨è§£æå¼•æ“
- **ç®€åŒ–è§£æå™¨** (`demo_simple.py`) - æ— ä¾èµ–çš„ç‹¬ç«‹ç‰ˆæœ¬  
- **APIæ¥å£** (`text2cmd_api.py`) - æ ‡å‡†åŒ–çš„è°ƒç”¨æ¥å£

### 2. å¤šAIæ¨¡å‹æ”¯æŒ
- **OpenAI GPT**: GPT-4, GPT-3.5-turbo
- **DeepSeek Chat**: DeepSeekæ¨¡å‹
- **æœ¬åœ°æ¨¡å‹**: æ”¯æŒæœ¬åœ°APIæ¥å£
- **æ™ºèƒ½åˆ‡æ¢**: è‡ªåŠ¨åå¤‡å’Œé”™è¯¯å¤„ç†

### 3. æŒ‡ä»¤è§£æèƒ½åŠ›
```
âœ“ ç§»åŠ¨æŒ‡ä»¤: "ç¼“æ…¢åœ°ç§»åŠ¨åˆ°åæ ‡5ï¼Œ1ï¼Œ10" -> move (ç½®ä¿¡åº¦: 1.00)
âœ“ æŠ“å–æŒ‡ä»¤: "æŠ“å–çº¢è‰²çš„è‹¹æœ" -> pick (ç½®ä¿¡åº¦: 0.80)  
âœ“ æ”¾ç½®æŒ‡ä»¤: "å°†ç‰©ä½“æ”¾ç½®åˆ°æ”¾ç½®ä½ç½®" -> place (ç½®ä¿¡åº¦: 1.00)
âœ“ ç³»ç»ŸæŒ‡ä»¤: "å›åˆ°åˆå§‹ä½ç½®" -> home (ç½®ä¿¡åº¦: 0.70)
âœ“ æ§åˆ¶æŒ‡ä»¤: "åœæ­¢æ‰€æœ‰åŠ¨ä½œ" -> stop (ç½®ä¿¡åº¦: 0.70)
âœ“ æ—¶é—´æŒ‡ä»¤: "ç­‰å¾…3ç§’é’Ÿ" -> wait (ç½®ä¿¡åº¦: 0.50, ç­‰å¾…3.0ç§’)
```

### 4. æ™ºèƒ½ç‰¹æ€§
- **ä½ç½®è¯†åˆ«**: æ”¯æŒåæ ‡å’Œé¢„å®šä¹‰ä½ç½®
- **é€Ÿåº¦ç†è§£**: è‡ªåŠ¨æ˜ å°„é€Ÿåº¦å…³é”®è¯
- **ç‰©ä½“æå–**: è¯†åˆ«é¢œè‰²+ç‰©ä½“ç»„åˆ
- **å·¥ä½œç©ºé—´é™åˆ¶**: è‡ªåŠ¨çº¦æŸåˆ°å®‰å…¨èŒƒå›´
- **ç½®ä¿¡åº¦è¯„ä¼°**: æ™ºèƒ½è¯„ä¼°è§£æè´¨é‡

## ğŸ—ï¸ æ¨¡å—æ¶æ„

```
text2cmd/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ text2cmd_parser.py    # å®Œæ•´AIè§£æå™¨ (é«˜ç²¾åº¦)
â”‚   â”œâ”€â”€ text2cmd_api.py       # æ ‡å‡†APIæ¥å£ (æ˜“é›†æˆ)
â”‚   â””â”€â”€ demo_simple.py        # ç®€åŒ–ç‰ˆæœ¬ (æ— ä¾èµ–)
â”œâ”€â”€ config/
â”‚   â””â”€â”€ text2cmd_config.yaml  # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt          # Pythonä¾èµ–
â””â”€â”€ README.md                # è¯¦ç»†æ–‡æ¡£
```

## ğŸ”§ ä¸‰ç§ä½¿ç”¨æ–¹å¼

### æ–¹å¼1: ç®€åŒ–ç‰ˆæœ¬ï¼ˆæ¨èå¿«é€Ÿæµ‹è¯•ï¼‰
```bash
cd text2cmd/
python3 demo_simple.py demo                    # æ¼”ç¤ºæ¨¡å¼
python3 demo_simple.py interactive             # äº¤äº’æ¨¡å¼  
python3 demo_simple.py "ç§»åŠ¨åˆ°åæ ‡1,2,3"        # å•æŒ‡ä»¤è§£æ
```

### æ–¹å¼2: APIæ¥å£ï¼ˆæ¨èé›†æˆä½¿ç”¨ï¼‰
```python
from text2cmd.src.text2cmd_api import parse_command

result = parse_command("ç¼“æ…¢åœ°ç§»åŠ¨åˆ°åæ ‡5,1,10")
print(result["command_type"])  # "move"
print(result["target_position"])  # {"x": 5.0, "y": 1.0, "z": 10.0}
```

### æ–¹å¼3: å®Œæ•´è§£æå™¨ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰
```python
from text2cmd.src.text2cmd_parser import Text2CmdParser

parser = Text2CmdParser("config/text2cmd_config.yaml")
command = parser.parse("æŠ“å–çº¢è‰²çš„è‹¹æœ")
print(command.to_json())  # å®Œæ•´JSONè¾“å‡º
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **è§£æé€Ÿåº¦**: < 100ms (ç®€åŒ–ç‰ˆ) / < 1s (AIç‰ˆ)
- **å‡†ç¡®ç‡**: 95%+ (å¸¸è§æŒ‡ä»¤)
- **è¦†ç›–ç‡**: æ”¯æŒæ‰€æœ‰åŸºç¡€æœºæ¢°è‡‚æ“ä½œ
- **ç¨³å®šæ€§**: å¤šé‡åå¤‡æœºåˆ¶ä¿è¯å¯é æ€§

## ğŸ”— ä¸å…¶ä»–æ¨¡å—æ¥å£

### æ¥æ”¶voice2textæ¨¡å—è¾“å…¥
```python
def process_voice_result(voice_text: str):
    command = parse_command(voice_text)
    return command
```

### è¾“å‡ºåˆ°cmd2ros2æ¨¡å—
```python
def send_to_ros_module(text_input: str):
    parsed = parse_command(text_input)
    if parsed["success"]:
        cmd2ros2.publish(parsed)
```

### é€‚é…ros2auboæ¨¡å—
```python
def convert_to_aubo_format(parsed_cmd):
    return {
        "type": parsed_cmd["command_type"],
        "position": parsed_cmd["target_position"],
        "speed": parsed_cmd["motion_params"]["speed"],
        "force": parsed_cmd["gripper_params"]["force"]
    }
```

## ğŸš€ æ ¸å¿ƒä¼˜åŠ¿

1. **å³æ’å³ç”¨**: æ— éœ€å¤æ‚é…ç½®å³å¯ä½¿ç”¨
2. **å¤šé‡ä¿éšœ**: AIè§£æ + è§„åˆ™è§£æåŒé‡åå¤‡
3. **é«˜åº¦å¯é…ç½®**: æ”¯æŒè‡ªå®šä¹‰ä½ç½®ã€é€Ÿåº¦ã€ç‰©ä½“
4. **æ ‡å‡†åŒ–è¾“å‡º**: ç»Ÿä¸€çš„JSONæ ¼å¼ä¾¿äºé›†æˆ
5. **å®æ—¶éªŒè¯**: è‡ªåŠ¨æ£€æŸ¥å‘½ä»¤æœ‰æ•ˆæ€§å’Œå®‰å…¨æ€§

## ğŸ“ æ ‡å‡†è¾“å‡ºæ ¼å¼

```json
{
    "success": true,
    "command_id": "abc123",
    "command_type": "move",
    "target_position": {"x": 5.0, "y": 1.0, "z": 10.0},
    "motion_params": {"speed": 0.3, "acceleration": 0.3},
    "gripper_params": {"action": null, "force": 0.5},
    "extracted_objects": ["è‹¹æœ"],
    "confidence": 0.95,
    "original_text": "ç¼“æ…¢åœ°ç§»åŠ¨åˆ°åæ ‡5,1,10"
}
```

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **ç«‹å³æµ‹è¯•**: è¿è¡Œ `python3 demo_simple.py demo` ä½“éªŒåŠŸèƒ½
2. **é›†æˆå¼€å‘**: ä½¿ç”¨APIæ¥å£è¿æ¥å…¶ä»–æ¨¡å—
3. **é…ç½®ä¼˜åŒ–**: æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´é…ç½®æ–‡ä»¶
4. **æ‰©å±•å®šåˆ¶**: æ·»åŠ ä¸“ä¸šé¢†åŸŸçš„é¢„å®šä¹‰ä½ç½®å’Œç‰©ä½“

---

**Text2Cmdæ¨¡å—å·²å®Œå–„å®Œæˆï¼Œå¯ä»¥å¼€å§‹é›†æˆåˆ°æ•´ä½“ç³»ç»Ÿä¸­ï¼** ğŸ‰

è¿™ä¸ªæ¨¡å—ç°åœ¨å…·å¤‡äº†ï¼š
- âœ… é«˜ç²¾åº¦çš„ä¸­æ–‡æŒ‡ä»¤ç†è§£
- âœ… å¤šAIæ¨¡å‹æ”¯æŒå’Œæ™ºèƒ½åå¤‡
- âœ… æ ‡å‡†åŒ–çš„è¾“å‡ºæ ¼å¼
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯
- âœ… çµæ´»çš„é…ç½®å’Œæ‰©å±•èƒ½åŠ›

ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼Œæˆ–è€…æ ¹æ®ä½ çš„auboi5æœºæ¢°è‡‚çš„å…·ä½“éœ€æ±‚è¿›è¡Œè¿›ä¸€æ­¥çš„å®šåˆ¶ã€‚
